<div class="app-page">
  <app-navbar></app-navbar>

  <div class="app-page__body">
    <!-- Sidebar placeholder -->
    <app-sidebar></app-sidebar>

    <div class="app-page__content">
      <div class="page-header">
        <h1 class="page-header__title">Actividades</h1>
        <app-button
          (click)="abrirFormModal()" label="Nueva Actividad">
          
        </app-button>
      </div>

      <main class="page-main">
        @if (isLoading) {
          <app-loading-overlay
            [fullscreen]="false"
            message="Cargando actividades..."
            size="lg">
          </app-loading-overlay>
        } @else {
          <div class="table-container">
            <app-table
              [columns]="columns"
              [data]="tableData"
              [filters]="filters"
              [totalItems]="actividades.length"
              [itemsPerPage]="10"
              [currentPage]="1"
              (onView)="onViewActivity($event)"
              (onEdit)="onEditActivity($event)"
              (onDelete)="onDeleteActivity($event)"
              (onFilterChange)="onFilterChange($event)"
              (onPageChange)="onPageChange($event)">
            </app-table>
          </div>
        }
      </main>
    </div>
  </div>

  <!-- Side Menu con Formulario -->
  <app-side-menu
    [isOpen]="isFormOpen"
    [title]="sideMenuTitle"
    (closeEvent)="cerrarFormModal()">
    <app-activity-form
      [activityToEdit]="activityToEdit"
      (closeForm)="cerrarFormModal()"
      (activityCreated)="onActivityCreated($event)"
      (activityUpdated)="onActivityUpdated($event)">
    </app-activity-form>
  </app-side-menu>

  <!-- Modal de confirmación de eliminación -->
  <app-modal-confirmation
    [visible]="showDeleteModal"
    [message]="deleteModalMessage"
    type="danger"
    (cancel)="cancelarEliminacion()"
    (confirm)="confirmarEliminacion()">
  </app-modal-confirmation>

  <!-- Side Menu para detalles de actividad -->
  <app-side-menu
    [isOpen]="showDetailsModal"
    [title]="detailsModalTitle"
    (closeEvent)="cerrarDetailsModal()">
    <app-activity-details
      [activity]="activityToView"
      (closeDetails)="cerrarDetailsModal()"
      (editActivity)="onEditFromDetails($event)">
    </app-activity-details>
  </app-side-menu>
</div>
