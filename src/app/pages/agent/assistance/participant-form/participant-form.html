<div class="app-page">
  <app-navbar></app-navbar>

  <div class="app-page__body">
    <app-sidebar></app-sidebar>

    <div class="app-page__content">
      <div class="page-header">
        <div class="flex items-center gap-2 mb-4">
          <app-back-button [isBackButton]="true"></app-back-button>
          <h1 class="page-header__title">Ficha de {{ participantName }}</h1>
        </div>
      </div>

      <main class="page-main">
        <!-- Loading State -->
        <app-loading-overlay
          *ngIf="!participantName"
          [fullscreen]="false"
          message="Cargando ficha del participante..."
          size="lg">
        </app-loading-overlay>

        <!-- Participant Profile Content -->
        <div *ngIf="participantName" class="w-full">
          <!-- Tabs de navegación -->
          <app-notification-tabs
            [tabs]="tabs"
            [activeTab]="activeTab"
            [showCount]="false"
            [showSummary]="false"
            (tabChange)="onTabChange($event)">
          </app-notification-tabs>

          <!-- Contenido según tab activo -->
          @if (activeTab === 'datos') {
            <div class="w-full">
              <app-form-personal-data
                [userData]="(userData$ | async) || undefined"
                [isAgentEdit]="true"
                (save)="onSaveProfile($event)"
                (cancel)="onCancelEdit()">
              </app-form-personal-data>
            </div>
          }

          @if (activeTab === 'resumen') {
            <div class="w-full">
              <app-form-summary></app-form-summary>
            </div>
          }

          @if (activeTab === 'actividades') {
            <div class="w-full">
              <app-recommend-activities></app-recommend-activities>
            </div>
          }
        </div>
      </main>
    </div>
  </div>
</div>

