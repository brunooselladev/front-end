<div class="w-full max-w-5xl mx-auto">
  <form [formGroup]="profileForm" class="bg-white rounded-2xl shadow-sm md:px-10 md:py-6">

    <!-- Subtítulo descriptivo para modo agente -->
    <div *ngIf="isAgentRegistration" class="mb-6">
      <p class="text-sm md:text-xl font-semibold text-gray-800">
        Ingresa los datos personales del paciente
      </p>
    </div>

    <!-- Título para modo edición de agente -->
    <div *ngIf="isAgentEdit" class="mb-6">
      <h2 class="text-sm md:text-xl font-semibold text-gray-800">
        Datos personales del paciente
      </h2>
    </div>

    <!-- Grid de inputs usando Tailwind -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      
      <div class="flex flex-col">
        <app-input
          label="Nombre completo"
          name="nombre"
          type="text"
          placeholder="Ingresa tu nombre completo"
          [control]="$any(profileForm.get('nombre'))"
          [disabled]="readonly"
          [required]="true">
        </app-input>
      </div>

      <div class="flex flex-col">
        <app-input
          label="DNI"
          name="dni"
          type="text"
          placeholder="Ej: 12345678"
          [control]="$any(profileForm.get('dni'))"
          [disabled]="readonly"
          [required]="true">
        </app-input>
      </div>

      <div class="flex flex-col">
        <app-input
          label="Fecha de nacimiento"
          name="fechaNacimiento"
          type="date"
          [control]="$any(profileForm.get('fechaNacimiento'))"
          [disabled]="readonly"
          [required]="true">
        </app-input>
      </div>

      <div class="flex flex-col">
        <app-input
          label="Teléfono"
          name="telefono"
          type="tel"
          placeholder="+54 11 1234-5678"
          [control]="$any(profileForm.get('telefono'))"
          [disabled]="readonly"
          [required]="true">
        </app-input>
      </div>

      <div class="flex flex-col md:col-span-2">
        <app-input
          label="Dirección de residencia"
          name="direccionResidencia"
          type="text"
          placeholder="Calle, número, localidad"
          [control]="$any(profileForm.get('direccionResidencia'))"
          [disabled]="readonly">
        </app-input>
      </div>

      <div class="flex flex-col">
        <app-input
          label="Alias"
          name="alias"
          type="text"
          placeholder="¿Cómo te gusta que te llamen?"
          [control]="$any(profileForm.get('alias'))"
          [disabled]="readonly">
        </app-input>
      </div>

      <div class="flex flex-col">
        <app-select
          label="Género autopercibido"
          name="generoAutoPercibido"
          placeholder="Selecciona una opción"
          [control]="$any(profileForm.get('generoAutoPercibido'))"
          [options]="generoOptions"
          [disabled]="readonly">
        </app-select>
      </div>

      <div class="flex flex-col">
        <app-select
          label="Estado civil"
          name="estadoCivil"
          placeholder="Selecciona una opción"
          [control]="$any(profileForm.get('estadoCivil'))"
          [options]="estadoCivilOptions"
          [disabled]="readonly">
        </app-select>
      </div>

      <div class="flex flex-col">
        <app-input
          label="Obra social"
          name="obraSocial"
          type="text"
          placeholder="Ej: OSDE, Swiss Medical"
          [control]="$any(profileForm.get('obraSocial'))"
          [disabled]="readonly">
        </app-input>
      </div>

    </div>

    <!-- Botones de acción con Tailwind -->
    <div class="flex flex-col-reverse sm:flex-row justify-end gap-3 pt-6 border-t border-gray-200" *ngIf="!readonly">
      <app-button
        *ngIf="!isAgentEdit"
        class="w-full sm:w-auto"
        label="Cancelar"
        variant="secondary"
        (clicked)="onCancel()">
      </app-button>
      <app-button
        class="w-full sm:w-auto"
        [label]="isAgentEdit ? 'Guardar cambios' : (isAgentRegistration ? 'Siguiente' : 'Guardar cambios')"
        variant="primary"
        [disabled]="isAgentRegistration && profileForm.invalid"
        (clicked)="isAgentEdit ? onSaveAgentEdit() : (isAgentRegistration ? onNext() : onSave())">
      </app-button>
    </div>

  </form>
</div>
