<div class="input-group">
  <label class="input-label">
    {{ label }}
    <span *ngIf="required" class="required-indicator">*</span>
  </label>
  <div class="input-container">
    <input
      class="input-field"
      [id]="name"
      [type]="inputType"
      [placeholder]="placeholder"
      [formControl]="control"
      [disabled]="disabled"
      [attr.aria-invalid]="control.touched && control.invalid ? true : null"
      [attr.aria-describedby]="name + '-error'"
      (input)="allowOnlyNumbersAndPlus ? onInputFilter($event) : null"
    />
    <button
      *ngIf="type === 'password'"
      type="button"
      class="password-toggle"
      (click)="togglePasswordVisibility()"
      [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'"
      tabindex="-1">
      <svg *ngIf="!showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
        <circle cx="12" cy="12" r="3"></circle>
      </svg>
      <svg *ngIf="showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
        <line x1="1" y1="1" x2="23" y2="23"></line>
      </svg>
    </button>
  </div>
</div>
<div class="input-error" *ngIf="control.touched && control.invalid" [id]="name + '-error'">
    <ng-container *ngIf="control.errors?.['required']">Campo requerido</ng-container>
    <ng-container *ngIf="control.errors?.['email'] && name !== 'password'">Email inválido</ng-container>
    <ng-container *ngIf="control.errors?.['minlength'] && name !== 'password'">
      Mínimo {{ control.errors?.['minlength']?.requiredLength }} caracteres
    </ng-container>
    <ng-container *ngIf="control.errors?.['maxlength'] && name !== 'password'">
      Máximo {{ control.errors?.['maxlength']?.requiredLength }} caracteres
    </ng-container>
    <ng-container *ngIf="control.errors?.['emailDomain']">
      El email debe ser de dominio {{ control.errors?.['emailDomain']?.requiredDomain }}
    </ng-container>
    <ng-container *ngIf="control.errors?.['unsupportedEmailDomain']">
      El dominio de email no está soportado.
    </ng-container>
    <ng-container *ngIf="control.errors?.['telefonoArgentino']">
      Teléfono argentino inválido
    </ng-container>
    <ng-container *ngIf="control.errors?.['soloNumeros']">
      Ingresar solo números
    </ng-container>

    <div *ngIf="name === 'password' && control.errors && !control.errors?.['required']">
      La contraseña debe cumplir con:
      <ul style="list-style-position: inside; padding-left: 10px; margin-top: 5px;">
        <li *ngIf="control.errors?.['minlength'] || control.errors?.['maxlength'] || control.errors?.['longitud']">Tener entre 8 y 16 caracteres</li>
        <li *ngIf="control.errors?.['mayuscula']">Tener al menos una mayúscula</li>
        <li *ngIf="control.errors?.['minuscula']">Tener al menos una minúscula</li>
        <li *ngIf="control.errors?.['caracterEspecial']">Tener al menos un caracter especial</li>
      </ul>
    </div>

    <ng-container *ngIf="control.errors && name !== 'password' && !control.errors?.['required'] && !control.errors?.['email'] && !control.errors?.['minlength'] && !control.errors?.['maxlength'] && !control.errors?.['emailDomain'] && !control.errors?.['telefonoArgentino'] && !control.errors?.['soloNumeros']">
      Valor inválido
    </ng-container>
  </div>
